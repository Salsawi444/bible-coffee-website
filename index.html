<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BIBLE & COFFEE | GLOBAL</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

<style>
html{scroll-behavior:smooth;}
body{font-family:'Poppins',sans-serif;background:#0a0a0a;color:white;margin:0;}

/* NAV */
.glass-nav{background:rgba(0,0,0,.95);border-bottom:1px solid rgba(255,255,255,.1);position:fixed;top:0;width:100%;z-index:1000;padding:8px 12px;}
.nav-links{display:flex;justify-content:flex-end;gap:10px;overflow-x:auto;}
.nav-links button{font-size:12px;font-weight:700;color:#aaa;background:none;border:2px solid #FCA311;padding:6px 14px;border-radius:6px;white-space:nowrap;cursor:pointer;transition:.3s;}
.nav-links button:hover{background:#FCA311;color:black;}
.active-link{background:#FCA311;color:black;}

/* HERO */
.hero-bg{background:linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.7)),url('hero.jpeg');background-size:cover;background-position:center;min-height:100vh;display:flex;align-items:center;justify-content:center;}
.hero-inner{max-width:1200px;width:100%;padding:20px;display:grid;grid-template-columns:1fr;gap:40px;text-align:center;}

/* Vision */
.vision-box{text-align:left;background:rgba(0,0,0,.6);padding:25px;border-left:4px solid #FCA311;border-radius:6px;}
.vision-box h3{color:#FCA311;font-size:22px;font-weight:700;margin-bottom:10px;}
.vision-box p{color:#ccc;line-height:1.6;font-size:15px;}

/* Hero Text */
.hero-title{font-family:'Playfair Display',serif;font-size:2.6rem;font-style:italic;line-height:1.2;margin:0;animation:fadeUp 1s ease forwards;opacity:0;}
.hero-title span{color:#FCA311;}
.hero-motto{font-size:1.2rem;color:#FCA311;margin-top:10px;font-weight:600;animation:fadeUp 1s ease forwards;animation-delay:.2s;opacity:0;}
.social-icons{display:flex;justify-content:center;gap:18px;margin-top:20px;animation:fadeUp 1s ease forwards;animation-delay:.4s;opacity:0;}
.social-icons a{color:white;transition:.3s;}
.social-icons a:hover{color:#FCA311;transform:scale(1.2);}
.tiktok{width:22px;height:22px;fill:currentColor;}

/* SECTIONS */
section{display:none;padding:120px 20px 80px;max-width:1200px;margin:auto;text-align:center;}
#home,#join{display:block;}

/* MAG */
.mag-preview{max-width:400px;margin:auto;}
.mag-preview img{width:100%;border-radius:8px;}

/* ANIM */
@keyframes fadeUp{from{opacity:0;transform:translateY(25px);}to{opacity:1;transform:none;}}

/* DESKTOP */
@media(min-width:768px){
.hero-inner{grid-template-columns:1fr 1fr;text-align:right;align-items:center;}
.hero-title{font-size:4rem;}
.hero-motto{font-size:1.6rem;}
.social-icons{justify-content:flex-end;}
.vision-box{text-align:left;}
}
</style>
</head>

<body>

<!-- NAV -->
<nav class="glass-nav">
<div class="nav-links">
<button onclick="showSection('home')" class="active-link">Home</button>
<button onclick="showSection('magazine')">Magazine</button>
<button onclick="showSection('events')">Events</button>
<button onclick="showSection('merch')">Merch</button>
<button onclick="showSection('join')">Join</button>
</div>
</nav>

<!-- HERO -->
<header id="home" class="hero-bg">
<div class="hero-inner">
<div class="vision-box">
<h3>Who We Are</h3>
<p>Bible & Coffee is a global movement where faith, community, and conversation meet. We create safe spaces for people to grow spiritually, connect deeply, and walk together in Christ.</p>
<p class="mt-3">Our vision is simple: Build disciples. Build friendships. Build purpose.</p>
</div>
<div>
<h1 class="hero-title">COFFEE MEETS<br><span>THE WORD.</span></h1>
<p class="hero-motto">Thank God Itâ€™s Friday!</p>
<div class="social-icons">
<a href="#"><i data-lucide="instagram"></i></a>
<a href="#"><i data-lucide="facebook"></i></a>
<a href="#"><i data-lucide="youtube"></i></a>
<a href="#"><i data-lucide="mail"></i></a>
<a href="#">
<svg class="tiktok" viewBox="0 0 24 24"><path d="M21 8.5a6.5 6.5 0 01-6.5-6.5h-4v14a3.5 3.5 0 11-3.5-3.5c.4 0 .8.1 1.2.2v-4a7.5 7.5 0 105.3 7.2V9.7A10.4 10.4 0 0021 12V8.5z"/></svg>
</a>
</div>
</div>
</div>
</header>

<!-- MAG -->
<section id="magazine">
<h2 class="text-4xl font-bold text-[#FCA311] mb-10">Weekly Magazine</h2>
<div class="mag-preview">
<img src="megimage.jpeg">
<a href="magazine.pdf" target="_blank" class="block bg-[#FCA311] text-black py-3 rounded mt-3 font-bold">Download PDF</a>
</div>
</section>

<!-- EVENTS -->
<section id="events">
<h2 class="text-4xl font-bold text-[#FCA311] mb-4">Events</h2>
<p class="text-2xl tracking-[10px] text-white/20 py-20">COMING SOON</p>
</section>

<!-- MERCH -->
<section id="merch">
<h2 class="text-4xl font-bold mb-10">The Merch</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
<img src="merch2.jpeg" class="w-full h-80 object-cover rounded">
<img src="merch3.jpeg" class="w-full h-80 object-cover rounded">
<img src="merch4.jpeg" class="w-full h-80 object-cover rounded">
<img src="merch5.jpeg" class="w-full h-80 object-cover rounded">
<img src="merch6.jpeg" class="w-full h-80 object-cover rounded">
<div class="flex items-center justify-center border border-dashed text-gray-500">NEW DROPS SOON</div>
</div>
</section>

<!-- JOIN -->
<section id="join" class="py-24 px-6 bg-[#0a0a0a]">
<div class="max-w-md mx-auto">
<h2 class="text-4xl font-bold text-center mb-8 italic text-[#FCA311] font-['Oswald'] uppercase tracking-tighter">Join Movement</h2>

<div id="counterBox" class="bg-[#FCA311]/10 border border-[#FCA311] p-4 mb-6 rounded text-center hidden animate-pulse">
<p class="text-[#FCA311] text-[10px] font-bold uppercase tracking-[3px]">
Live Availability: <span id="spotsLeft" class="text-white text-xl ml-2 font-black">8</span> <span class="text-white/50 text-[10px]">Spots Left</span>
</p>
</div>

<form id="regForm" class="space-y-4">
<input type="text" id="name" placeholder="FULL NAME" required class="w-full bg-[#111] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">
<input type="email" id="email" placeholder="EMAIL ADDRESS" required class="w-full bg-[#111] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">
<input type="tel" id="phone" placeholder="PHONE (+251...)" required class="w-full bg-[#111] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">

<div class="grid grid-cols-2 gap-4">
<select id="country" onchange="updateCities()" required class="w-full bg-[#111] border border-[#333] text-white p-4 rounded outline-none">
<option value="" disabled selected>COUNTRY</option>
<option value="Ethiopia">Ethiopia</option>
<option value="USA">USA</option>
<option value="Germany">Germany</option>
</select>

<select id="city" onchange="updateSubCities()" required class="w-full bg-[#111] border border-[#333] text-white p-4 rounded outline-none">
<option value="" disabled selected>CITY</option>
</select>
</div>

<div id="subCityGroup" class="hidden">
<select id="subCity" onchange="checkSpots()" class="w-full bg-[#FCA311] text-black font-bold p-4 rounded outline-none">
<option value="" disabled selected>SELECT YOUR AREA / SPOT</option>
</select>
</div>

<button type="submit" id="subBtn" class="w-full bg-[#FCA311] text-black font-black uppercase tracking-widest py-5 rounded mt-4 hover:bg-white transition-all active:scale-95">
Confirm Registration
</button>
</form>
</div>
</section>

<script>
lucide.createIcons();

function showSection(id){
document.querySelectorAll('section,header').forEach(e=>e.style.display='none');
document.getElementById(id).style.display='block';
document.querySelectorAll('.nav-links button').forEach(b=>b.classList.remove('active-link'));
event.target.classList.add('active-link');
}

// ===== REGISTRATION LOGIC =====
const API_URL="https://sheetdb.io/api/v1/9q45d3e7oe5ks";
const ADMIN_PHONE="251910884585";
const MAX_CAPACITY=8;

const locs={
"Ethiopia":{"Addis Ababa":["Bole","Ayat","Megenagna","Mexico","Haile Garment","Old Airport"],"Hawassa":["Center"],"Adama":["Center"]},
"USA":{"Dallas":["Downtown"]},
"Germany":{"Berlin":["Mitte"]}
};

function updateCities(){
const country=document.getElementById('country').value;
const citySel=document.getElementById('city');
citySel.innerHTML='<option value="" disabled selected>CITY</option>';
document.getElementById('subCityGroup').classList.add('hidden');
document.getElementById('counterBox').classList.add('hidden');
if(locs[country]) Object.keys(locs[country]).forEach(c=>citySel.add(new Option(c.toUpperCase(),c)));
}

function updateSubCities(){
const country=document.getElementById('country').value;
const city=document.getElementById('city').value;
const sSel=document.getElementById('subCity');
const areas=locs[country][city];
if(areas && areas.length>0){
sSel.innerHTML='<option value="" disabled selected>SELECT YOUR AREA / SPOT</option>';
areas.forEach(a=>sSel.add(new Option(a.toUpperCase(),a)));
document.getElementById('subCityGroup').classList.remove('hidden');
document.getElementById('counterBox').classList.add('hidden');
}else document.getElementById('subCityGroup').classList.add('hidden');
}

async function checkSpots(){
const location=document.getElementById('subCity').value;
const btn=document.getElementById('subBtn');
const counterBox=document.getElementById('counterBox');
if(!location) return;
counterBox.classList.remove('hidden');
try{
const res=await fetch(`${API_URL}/search?Location=${location}`);
const data=await res.json();
const remaining=MAX_CAPACITY-data.length;
document.getElementById('spotsLeft').innerText=remaining>0?remaining:0;
if(remaining<=0){
btn.disabled=true;
btn.innerText="LOCATION FULL";
btn.classList.replace('bg-[#FCA311]','bg-gray-700');
}else{
btn.disabled=false;
btn.innerText="Confirm Registration";
btn.classList.replace('bg-gray-700','bg-[#FCA311]');
}
}catch(err){console.error("Error fetching spots:",err);}
}

document.getElementById('regForm').onsubmit=async(e)=>{
e.preventDefault();
const btn=document.getElementById('subBtn');
btn.innerText="SYNCING...";
btn.disabled=true;
const payload={
Name:document.getElementById('name').value,
Email:document.getElementById('email').value,
Phone:document.getElementById('phone').value,
Country:document.getElementById('country').value,
City:document.getElementById('city').value,
Location:document.getElementById('subCity').value,
"Registration Date":new Date().toLocaleDateString(),
"Registration Time":new Date().toLocaleTimeString()
};
try{
await fetch(API_URL,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({data:[payload]})
});
const waText=`Bible %26 Coffee Registration%0AName: ${payload.Name}%0ALocation: ${payload.Location}`;
window.open(`https://wa.me/${ADMIN_PHONE}?text=${waText}`,'_blank');
await checkSpots();
alert("Registered! Your spot is secured.");
document.getElementById('regForm').reset();
document.getElementById('subCityGroup').classList.add('hidden');
document.getElementById('counterBox').classList.add('hidden');
btn.innerText="Confirm Registration";
btn.disabled=false;
}catch(err){alert("Error saving data."); btn.disabled=false;}
};
</script>

</body>
</html>
