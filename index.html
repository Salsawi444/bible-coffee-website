<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BIBLE & COFFEE | GLOBAL</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
<style>
html { scroll-behavior: smooth; }
body { font-family: 'Inter', sans-serif; background-color: #0a0a0a; color: white; margin: 0; }
h1, h2 { font-family: 'Oswald', sans-serif; text-transform: uppercase; }

.hero-bg {
    background: linear-gradient(rgba(0,0,0,0.8), rgba(10,10,10,1)), url('hero.jpeg');
    background-size: cover; background-position: center;
    min-height: 100vh; display: flex; align-items: center; justify-content: center;
    text-align: center; flex-direction: column;
}

.glass-nav { background: rgba(0, 0, 0, 0.95); border-bottom: 1px solid rgba(255,255,255,0.1); width: 100%; position: fixed; top: 0; z-index: 1000; }
.nav-links { display: flex; gap: 20px; overflow-x: auto; padding: 15px; scrollbar-width: none; justify-content: center; }
.nav-links::-webkit-scrollbar { display: none; }
.nav-links button, .nav-links a { font-size: 11px; font-weight: 700; letter-spacing: 1px; color: #888; text-transform: uppercase; background: none; border: none; cursor: pointer; }
.nav-links .active-link { color: #FCA311; }

input, select { background: #151515 !important; border: 1px solid #333 !important; color: white !important; padding: 14px; width: 100%; border-radius: 4px; margin-bottom: 15px; outline: none; }
.counter-box { background: rgba(252, 163, 17, 0.1); border: 1px solid #FCA311; padding: 15px; margin-bottom: 20px; border-radius: 4px; display: none; }
</style>
</head>
<body>

<!-- Navigation -->
<nav class="glass-nav">
    <div class="nav-links">
        <button onclick="reveal('home')" class="active-link">HOME</button>
        <button onclick="reveal('magazine')">MAGAZINE</button>
        <button onclick="reveal('events')">EVENTS</button>
        <button onclick="reveal('merch')">MERCH</button>
        <button onclick="reveal('join')">JOIN</button>
    </div>
</nav>

<!-- Hero / Home -->
<section id="home" class="hero-bg">
    <h1 class="text-6xl md:text-8xl lg:text-9xl font-bold italic mb-6">
        COFFEE MEETS <br><span class="text-[#FCA311]">THE WORD.</span>
    </h1>
    <p class="text-xl md:text-3xl text-white/70 max-w-2xl">Awaken your spirit, one cup and one verse at a time.</p>
    <div class="flex justify-center gap-6 mt-12 text-white/50">
        <a href="#"><i data-lucide="instagram"></i></a>
        <a href="#"><i data-lucide="facebook"></i></a>
        <a href="#"><i data-lucide="youtube"></i></a>
        <a href="#"><i data-lucide="mail"></i></a>
    </div>
</section>

<!-- Magazine -->
<section id="magazine" class="py-24 px-6 bg-[#0a0a0a]">
    <h2 class="text-4xl font-bold text-[#FCA311] mb-12 uppercase">Weekly Magazine</h2>
    <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
        <div class="bg-[#111] p-4 rounded-lg border border-white/10 shadow-lg">
            <embed src="magazine.pdf" type="application/pdf" class="w-full h-[500px] rounded-lg border border-white/20" />
        </div>
        <div class="flex flex-col justify-center gap-6">
            <p class="text-white/70 text-lg">
                Dive into this week's Bible & Coffee edition. Explore insights, reflections, and stories curated to refresh your spirit and deepen your faith.
            </p>
            <a href="magazine.pdf" target="_blank" 
               class="bg-gradient-to-r from-[#FCA311] to-[#FFBA49] text-black font-bold uppercase tracking-widest py-5 rounded-lg text-center shadow-md hover:scale-105 transition-transform duration-300">
               Download PDF Edition
            </a>
        </div>
    </div>
</section>

<!-- Events -->
<section id="events">
    <h2 class="text-4xl font-bold text-[#FCA311] mb-4">Events</h2>
    <p class="text-2xl tracking-[10px] text-white/20 py-20">COMING SOON</p>
</section>

<!-- Merch -->
<section id="merch">
    <h2 class="text-4xl font-bold mb-10">The Merch</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <img src="merch2.jpeg" class="w-full h-80 object-cover rounded border border-white/5">
        <img src="merch3.jpeg" class="w-full h-80 object-cover rounded border border-white/5">
        <img src="merch4.jpeg" class="w-full h-80 object-cover rounded border border-white/5">
        <img src="merch5.jpeg" class="w-full h-80 object-cover rounded border border-white/5">
        <img src="merch6.jpeg" class="w-full h-80 object-cover rounded border border-white/5">
        <div class="flex items-center justify-center border border-dashed border-white/10 text-gray-600">NEW DROPS SOON</div>
    </div>
</section>

<!-- Join / Registration -->
<section id="join" class="py-24 px-6 bg-[#0a0a0a]">
    <div class="max-w-md mx-auto">
        <h2 class="text-4xl font-bold text-center mb-8 italic text-[#FCA311] font-['Oswald'] uppercase">Join Movement</h2>
        <div id="counterBox" class="bg-[#FCA311]/10 border border-[#FCA311] p-4 mb-6 rounded text-center hidden">
            <p class="text-[#FCA311] text-xs font-bold uppercase tracking-widest">
                Current Availability: <span id="spotsLeft" class="text-white text-lg ml-2">8</span> Spots Left
            </p>
        </div>

        <form id="regForm" class="space-y-4">
            <input type="text" id="name" placeholder="FULL NAME" required class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">
            <input type="email" id="email" placeholder="EMAIL ADDRESS" required class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">
            <input type="tel" id="phone" placeholder="PHONE" required class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none focus:border-[#FCA311]">
            <select id="country" onchange="updateCities()" required class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none appearance-none">
                <option value="" disabled selected>COUNTRY</option>
                <option value="Ethiopia">Ethiopia</option>
                <option value="Germany">Germany</option>
                <option value="USA">USA</option>
                <option value="Netherlands">Netherlands</option>
                <option value="Kenya">Kenya</option>
            </select>
            <select id="city" onchange="updateSubCities()" required class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none appearance-none">
                <option value="" disabled selected>CITY</option>
            </select>
            <div id="subCityGroup" class="hidden">
                <select id="subCity" onchange="checkSpots()" class="w-full bg-[#151515] border border-[#333] text-white p-4 rounded outline-none appearance-none">
                    <option value="" disabled selected>SELECT AREA</option>
                </select>
            </div>
            <button type="submit" id="subBtn" class="w-full bg-[#FCA311] text-black font-black uppercase tracking-widest py-5 rounded mt-4 hover:bg-white transition-colors duration-300">
                Confirm Registration
            </button>
        </form>
    </div>
</section>

<script>
lucide.createIcons();

const SHEETDB_API = "https://sheetdb.io/api/v1/9q45d3e7oe5ks";
const WHATSAPP_NUM = "251910884585";
const LIMIT_PER_SPOT = 8;
const locations = {
    "Ethiopia": {"Addis Ababa":["Bole","Ayat","Megenagna","Mexico","Haile Garment","Old Airport"], "Hawassa":["Main Center"], "Adama":["Main Center"]},
    "Germany":{"Berlin":["Mitte"]},
    "USA":{"Dallas":["Downtown"]},
    "Netherlands":{"Amsterdam":["Zuid"]},
    "Kenya":{"Nairobi":["Westlands"]}
};

function reveal(id){
    ["home","magazine","events","merch","join"].forEach(s=>document.getElementById(s).style.display="none");
    document.getElementById(id).style.display="block";
    document.getElementById(id).scrollIntoView({behavior:"smooth"});
    lucide.createIcons();
}

function updateCities(){
    const country=document.getElementById('country').value;
    const citySel=document.getElementById('city');
    citySel.innerHTML='<option value="" disabled selected>CITY</option>';
    document.getElementById('subCityGroup').classList.add('hidden');
    document.getElementById('counterBox').classList.add('hidden');
    if(locations[country]) Object.keys(locations[country]).forEach(c=>citySel.add(new Option(c.toUpperCase(),c)));
}

function updateSubCities(){
    const country=document.getElementById('country').value;
    const city=document.getElementById('city').value;
    const subCitySel=document.getElementById('subCity');
    const areas=locations[country][city];
    if(areas){subCitySel.innerHTML='<option value="" disabled selected>SELECT AREA</option>'; areas.forEach(a=>subCitySel.add(new Option(a.toUpperCase(),a))); document.getElementById('subCityGroup').classList.remove('hidden');}
    else document.getElementById('subCityGroup').classList.add('hidden');
}

async function checkSpots(){
    const city=document.getElementById('city').value;
    const spot=document.getElementById('subCity').value;
    const counter=document.getElementById('counterBox');
    const btn=document.getElementById('subBtn');
    if(spot){counter.classList.remove('hidden'); try{const resp=await fetch(`${SHEETDB_API}/search?City=${city}&Spot=${spot}`); const data=await resp.json(); const remaining=LIMIT_PER_SPOT-data.length; document.getElementById('spotsLeft').innerText=remaining>0?remaining:0; if(remaining<=0){btn.disabled=true; btn.innerText="LOCATION FULL"; btn.style.backgroundColor="#444";}else{btn.disabled=false; btn.innerText="CONFIRM REGISTRATION"; btn.style.backgroundColor="#FCA311";}}catch(e){console.error(e);}}
}

document.getElementById('regForm').onsubmit=async e=>{
    e.preventDefault();
    const btn=document.getElementById('subBtn'); const oldText=btn.innerText; btn.innerText="PROCESSING...";
    const formData={Name:document.getElementById('name').value, Email:document.getElementById('email').value, Phone:document.getElementById('phone').value, Country:document.getElementById('country').value, City:document.getElementById('city').value, Spot:document.getElementById('subCity').value||"General", "Registration Date":new Date().toLocaleDateString(), "Registration Time":new Date().toLocaleTimeString()};
    try{await fetch(SHEETDB_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[formData]})});
    const msg=`Hello! I just registered for Bible %26 Coffee.%0A%0A*Name:* ${formData.Name}%0A*Location:* ${formData.City} - ${formData.Spot}`;
    window.open(`https://wa.me/${WHATSAPP_NUM}?text=${msg}`,'_blank'); alert("Registration Submitted Successfully!"); btn.innerText=oldText; document.getElementById('regForm').reset(); checkSpots();}catch(e){alert("Submission failed. Please try again."); btn.innerText=oldText;}
};
</script>

</body>
</html>
