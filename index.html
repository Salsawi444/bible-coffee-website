<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bible & Coffee | Global</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; scroll-padding-top: 80px; }
        body { font-family: 'Inter', sans-serif; background-color: #0a0a0a; color: white; margin: 0; overflow-x: hidden; }
        h1, h2, h3, .brand-font { font-family: 'Oswald', sans-serif; text-transform: uppercase; }
        .accent-text { color: #FCA311; }
        .accent-bg { background-color: #FCA311; }
        .glass-nav { background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.1); }
        
        /* The Original Button Style */
        .btn-primary { 
            background-color: #FCA311; 
            color: black; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 0.2em; 
            font-size: 10px; 
            padding: 1.25rem 3rem; 
            border-radius: 2px;
            transition: all 0.3s ease;
            display: inline-block;
        }
        .btn-secondary { 
            border: 1px solid rgba(255,255,255,0.2); 
            color: white; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 0.2em; 
            font-size: 10px; 
            padding: 1.25rem 3rem; 
            border-radius: 2px;
            transition: all 0.3s ease;
            display: inline-block;
        }
        .btn-primary:hover { background-color: #e59400; transform: translateY(-2px); }
        .btn-secondary:hover { background-color: rgba(255,255,255,0.05); border-color: white; }

        /* Mobile Input Fix */
        input, select { 
            background: black !important; 
            border: 1px solid rgba(255,255,255,0.2) !important; 
            color: white !important; 
            border-radius: 2px !important;
            font-size: 16px !important; 
            padding: 1.25rem !important;
            width: 100%;
            outline: none;
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>

    <nav class="fixed w-full z-[100] glass-nav py-4 px-6">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="#" class="flex items-center gap-2">
                <i data-lucide="coffee" class="text-white w-6 h-6"></i>
                <span class="text-xl font-bold brand-font tracking-tighter italic">BIBLE & COFFEE</span>
            </a>
            <a href="#join" class="accent-bg text-black px-4 py-2 rounded-sm font-bold brand-font text-[10px] tracking-widest">JOIN</a>
        </div>
    </nav>

    <header class="relative min-h-screen flex flex-col justify-center items-center text-center px-6 bg-[linear-gradient(to_bottom,rgba(0,0,0,0.4),rgba(10,10,10,1)),url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=2070')] bg-cover bg-center">
        <h1 class="text-6xl md:text-9xl font-bold leading-[0.9] mb-8 uppercase">
            C<span class="accent-text">O</span>FFEE MEETS<br>THE WORD.
        </h1>
        <div class="flex flex-col md:flex-row gap-4">
            <a href="#join" class="btn-primary">Join Movement</a>
            <a href="#magazine" class="btn-secondary">The Magazine</a>
        </div>
    </header>

    <section id="magazine" class="py-24 bg-neutral-900 px-6 text-center">
        <h2 class="text-5xl md:text-7xl font-bold uppercase mb-4 italic">The Magazine</h2>
        <p class="text-gray-500 text-[10px] tracking-[0.3em] uppercase mb-12">Weekly Digital Edition</p>
        <div class="max-w-sm mx-auto group">
            <div class="relative mb-10 shadow-[0_20px_50px_rgba(0,0,0,0.6)] rounded-lg overflow-hidden border border-white/10">
                <img src="magazine28-page1.jpeg" alt="Cover" class="w-full h-auto block">
            </div>
            <a href="magazine28.pdf" target="_blank" class="btn-primary">Read Issue #28</a>
        </div>
    </section>

    <section id="join" class="py-32 px-6 bg-[#0c0c0c]">
        <div class="max-w-xl mx-auto text-center">
            <h2 class="text-5xl md:text-7xl font-bold uppercase mb-12">Register</h2>
            <form id="mainRegForm" class="space-y-4 text-left">
                <input type="text" id="userName" placeholder="FULL NAME" required>
                <input type="tel" id="userPhone" placeholder="PHONE NUMBER" required>
                
                <select id="userCountry" required onchange="updateCities()">
                    <option value="" disabled selected>SELECT COUNTRY</option>
                    <option value="Ethiopia">Ethiopia</option>
                    <option value="Germany">Germany</option>
                    <option value="Netherlands">Netherlands</option>
                    <option value="Sweden">Sweden</option>
                </select>

                <select id="userCity" required onchange="updateSpecificLocations()">
                    <option value="" disabled selected>SELECT CITY</option>
                </select>

                <select id="userLocation" required>
                    <option value="" disabled selected>SELECT GATHERING SPOT</option>
                </select>

                <button type="submit" id="submitBtn" class="btn-primary w-full mt-6">Confirm Registration</button>
            </form>
        </div>
    </section>

    <footer class="py-20 text-center border-t border-white/5 text-gray-800 text-[10px] tracking-[0.5em] uppercase">
        &copy; 2026 Bible & Coffee Movement â€¢ Global
    </footer>

    <script>
        const API_URL = "https://sheetdb.io/api/v1/9q45d3e7oe5ks";
        const ADMIN_PHONE = "251910884585"; 

        const geoData = {
            "Ethiopia": ["Addis Ababa", "Hawassa", "Adama", "Bishoftu"],
            "Germany": ["Frankfurt", "Munich"],
            "Netherlands": ["Amsterdam", "Rotterdam"],
            "Sweden": ["Stockholm"]
        };

        function updateCities() {
            const country = document.getElementById('userCountry').value;
            const citySel = document.getElementById('userCity');
            citySel.innerHTML = '<option value="" disabled selected>SELECT CITY</option>';
            geoData[country].forEach(city => {
                let opt = document.createElement('option');
                opt.value = city; opt.textContent = city.toUpperCase();
                citySel.appendChild(opt);
            });
        }

        async function updateSpecificLocations() {
            const city = document.getElementById('userCity').value;
            const locSel = document.getElementById('userLocation');
            if (city === "Addis Ababa") {
                locSel.innerHTML = '<option disabled>LOADING...</option>';
                const res = await fetch(API_URL);
                const data = await res.json();
                locSel.innerHTML = '<option value="" disabled selected>SELECT ADDIS SPOT</option>';
                ["Ayat", "Haile Garment", "Mexico"].forEach(g => {
                    const count = data.filter(r => r.Location === g).length;
                    let opt = document.createElement('option');
                    opt.value = g; opt.disabled = count >= 8;
                    opt.textContent = `${g.toUpperCase()} (${8-count} SPOTS LEFT)`;
                    locSel.appendChild(opt);
                });
            } else {
                locSel.innerHTML = '<option value="General Fellowship">GENERAL FELLOWSHIP SPOT</option>';
            }
        }

        document.getElementById('mainRegForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.innerText = "SAVING...";

            const payload = {
                data: [{
                    "Name": document.getElementById('userName').value,
                    "Phone": document.getElementById('userPhone').value,
                    "Country": document.getElementById('userCountry').value,
                    "City": document.getElementById('userCity').value,
                    "Location": document.getElementById('userLocation').value,
                    "Timestamp": new Date().toLocaleString()
                }]
            };

            await fetch(API_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });
            window.location.href = `https://wa.me/${ADMIN_PHONE}?text=${encodeURIComponent("New registration from " + payload.data[0].Name + " in " + payload.data[0].City)}`;
        };
        lucide.createIcons();
    </script>
</body>
</html>
