<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>B&C | Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { background-color: #0a0a0a; color: white; font-family: sans-serif; }</style>
</head>
<body class="p-8">
    <div id="lock" class="fixed inset-0 bg-black flex items-center justify-center z-50">
        <div class="bg-neutral-900 p-8 rounded border border-neutral-800 text-center">
            <h2 class="mb-4 font-bold uppercase tracking-widest text-yellow-500">Admin Login</h2>
            <input type="password" id="pass" placeholder="Password" class="bg-black border border-neutral-800 p-2 mb-4 w-full text-center outline-none">
            <button onclick="auth()" class="w-full bg-yellow-500 text-black font-bold py-2 rounded uppercase text-sm">Login</button>
        </div>
    </div>

    <div id="dash" class="hidden max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-8 uppercase border-b border-neutral-800 pb-4">Registrations</h1>
        <div id="tableContainer" class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="text-gray-500 text-xs uppercase border-b border-neutral-800">
                        <th class="p-4">Name</th><th class="p-4">Phone</th><th class="p-4">Location</th><th class="p-4">Date</th>
                    </tr>
                </thead>
                <tbody id="list" class="text-sm"></tbody>
            </table>
        </div>
    </div>

    <script>
        function auth() {
            const p = document.getElementById('pass').value;
            if (p === "abc@123") {
                document.getElementById('lock').style.display = 'none';
                document.getElementById('dash').style.display = 'block';
                loadData();
            } else { alert("Wrong password"); }
        }

        async function loadData() {
            const res = await fetch("https://sheetdb.io/api/v1/9q45d3e7oe5ks");
            const data = await res.json();
            const list = document.getElementById('list');
            list.innerHTML = data.reverse().map(r => `
                <tr class="border-b border-neutral-900">
                    <td class="p-4">${r.Name}</td>
                    <td class="p-4">${r.Phone}</td>
                    <td class="p-4 text-yellow-500">${r.Location}</td>
                    <td class="p-4 text-gray-500 text-xs">${r.Timestamp}</td>
                </tr>
            `).join('');
        }
    </script>
</body>
</html>
